<head>
    <title>Reibai-sensei translation</title>
    <link rel="icon" href="./favicon.png"/>
    <meta charset="utf8"/>
</head>

<body>
    <div id="status_message_holder">Loading, please wait...</div>
    <div class="split-view">
        <div style="position: relative">
            <img id="current_page_img"/>
            <svg id="annotations_svg_root" style="position: absolute; left: 0" width="685" height="1024"></svg>
        </div>
        <div style="flex: 1; display: flex; flex-direction: column">
            <div>
                <form id="page_select_form">
                    <label>
                        <span>Page: </span>
                        <input id="page_input" type="number" value="4" min="0"/>
                    </label>
                    <label>
                        <span>Volume: </span>
                        <input id="volume_input" type="number" value="1" min="1" max="20"/>
                    </label>
                </form>
            </div>
            <form id="bubbles_translations_input_form">
                <div id="all_text_holder"></div>
            </form>
        </div>
    </div>
    <div style="display: flex; margin: 8px">
        <textarea style="flex: 1" placeholder="Put here free-form remarks. Like '#21 Has wrong kanji recognized, correct is 寝, not 第' or 'Bubble between #6 and #13 not recognized, it says 泣かしちゃった which translates to `Tokyo is the capital of Japan`'. Based on these remarks, I'll tune the tool to standardize such corner cases" rows="5"></textarea>
        <button id="go_to_next_page_button" style="margin: 12px; font-size: 24px;" onclick="alert('TODO: implement!')">→ Next!</button>
    </div>
    <p>Hey, Ngelzzz!</p>
    <p>Here is a web app I wrote for you to translate the the <a href="https://myanimelist.net/anime/10338/Honto_ni_Atta_Reibai_Sensei">Honto ni Atta! Reibai Sensei</a> manga</p>
    <p>You can navigate through bubbles by either clicking on them, or by pressing TAB button</p>
    <p>The changes are saved whe</p>
    <p>Feel free to email me if you get any questions</p>
    <p>The tool is not ready for use yet, pls wait a bit before I finish implementing it!</p>
</body>

<script type="module">
    import {loadModule} from 'https://klesun.github.io/ts-browser/src/ts-browser.js';
    loadModule('./index.ts')
        .then(indexModule => indexModule.default())
        .catch(error => alert('Script execution failed - ' + error));
</script>

<style>
    .split-view {
        display: flex;
    }
    .block-polygon {
        fill: rgba(226, 231, 234, 0.19);
        stroke: #afafaf8c;
        cursor: pointer;
    }
    .block-polygon:hover:not(.focused-block-polygon) {
        stroke: #aae3e3;
    }
    .focused-block-polygon {
        stroke: #7b7be8;
        fill: rgba(114, 236, 255, 0.28);
    }
    .sentence-block {
        margin-bottom: 16px;
    }
    .sentence-block textarea {
        overflow-y: hidden;
    }
    #all_text_holder {
        margin-left: 12px;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        /* on 4k display it would be impractical to get blocks so fare from each other */
        max-width: 840px;
        white-space: pre-wrap;
        flex: 1;
    }
    .sentence-block {
        display: flex;
        flex-direction: column;
        justify-content: end;
        margin-right: 12px;
    }
    input[type="number"] {
        width: 80px;
    }
    .ocred-text-block {
        display: flex;
        justify-content: space-between;
        align-items: end;
    }
    .font-size-holder {
        font-size: 8px;
    }
    .bubble-number-holder {
        margin-left: 4px;
    }
    .confidence-holder {
        cursor: help;
        font-size: 8px;
        color: grey;
        margin-left: 4px;
    }
    textarea::placeholder {
        color: #c2c2c2;
    }
    #status_message_holder {
        color: #269e67;
        font-size: 36px;
        text-align: center;
    }
</style>
